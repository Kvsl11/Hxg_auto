name: üîÅ AutoZip Conf_app

on:
  push:
    branches:
      - main
    paths:
      - 'Conf_app/**'
      - '.github/workflows/auto-zip-confapp.yml'  # Reexecuta se este arquivo mudar

jobs:
  zip-confapp:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: üì• Clonando reposit√≥rio
        uses: actions/checkout@v4

      - name: üß© Compactando pasta Conf_app
        run: |
          echo "Compactando pasta Conf_app..."
          if [ -d "Conf_app" ]; then
            zip -r Conf_app.zip Conf_app
          else
            echo "‚ùå Pasta Conf_app n√£o encontrada!"
            exit 1
          fi

      - name: üì§ Commit e push do ZIP gerado
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

          if [ -f "Conf_app.zip" ]; then
            git add -f Conf_app.zip
            git commit -m "Atualiza√ß√£o "Conf_app.zip" automaticamente" || echo "‚ö†Ô∏è Nenhuma mudan√ßa para commitar."
            git push || echo "‚úÖ Push conclu√≠do ou sem altera√ß√µes."
          else
            echo "‚ö†Ô∏è Nenhum arquivo ZIP encontrado ap√≥s compacta√ß√£o."
            exit 1
          fi
